# ðŸ“„ XBRL AI â€” Project Blueprint (v3.0)
 
> âœ… **Goal**: Generate **100% SSM-compliant XBRL** + **human-readable Filing Report** from any MFRS/MPERS PDF  
> âœ… **Architecture**: Agentic, HITL-enabled, xAI-powered, Next.js + FastAPI

---

## ðŸŽ¯ 1. Ground Truth (Omesti Healthcare)

| Item | Value |
|------|-------|
| **Company Name** | Omesti Healthcare Sdn. Bhd. |
| **Registration No** | `202201041807` |
| **FYE** | `31 March 2024` |
| **Nature** | Separate, Audited, MFRS |
| **Currency** | MYR (Actuals) |

### âœ… Reference Files (For Validation)
- **PDF**: `uploads/OHealthcare-AFS-2024.pdf`
- **Excel**: `docs/FS-MFRS-OMESTI_HEALTHCARE_SDN._BHD-202201041807-31032024.xlsx`
- **XBRL**: `docs/SSM_FS-MFRS_202201041807_20240331 - Copy.xml.txt`
- **Filing Report**: `docs/Filing report generated by mbrsAI.pdf`

---

## ðŸ§  2. System Architecture (Agentic Design)

```mermaid
graph LR
  A[User Browser] -->|Upload PDF| B(Next.js Frontend)
  B -->|POST /api/ingest| C[Ingestion Agent]
  C --> D[Docling + PyMuPDF<br>(PDF â†’ Structured Data)]
  D --> E[Mapping Agent<br>(SSM Taxonomy + xAI)]
  E --> F[HITL Agent<br>(Confidence <98% â†’ Human Review)]
  F --> G[XBRL Generation Agent]
  G --> H[Filing Report Agent]
  H --> I[Download XBRL + Report]
  I --> J[LLM Evaluator<br>(Quality Gate: 100%)]


## 3. Agent	Responsibility
1. Ingestion Agent    - PDF parsing (Docling + PyMuPDF + Ollama fallback)
2. Mapping Agent      - Map PDF labels â†’ SSM XBRL concepts (taxonomy-driven)
3. HITL Agent         - Flag low-confidence mappings for human review
4. XBRL Agent         - Generate valid XBRL instance with contexts/units
5. Filing Report Agent- Generate human-readable PDF report
6. Evaluator Agent    - Validate against gold standard + SSM rules

## 4. Project Structure (VS Code) 
xbrl-ai/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ venv/
â”‚   â”œâ”€â”€ taxonomies/
â”‚   â”‚   â””â”€â”€ SSMxT_2022v1.0/               # SSM taxonomy
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py                       # FastAPI entry
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â”œâ”€â”€ ingestion_agent.py        # PDF â†’ structured data
â”‚   â”‚   â”‚   â”œâ”€â”€ mapping_agent.py          # Label â†’ XBRL concept
â”‚   â”‚   â”‚   â”œâ”€â”€ hitl_agent.py             # Confidence scoring + human review
â”‚   â”‚   â”‚   â”œâ”€â”€ xbrl_agent.py             # XBRL XML generation
â”‚   â”‚   â”‚   â”œâ”€â”€ filing_report_agent.py    # Filing Report PDF
â”‚   â”‚   â”‚   â””â”€â”€ evaluator_agent.py        # Quality gate
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚       â””â”€â”€ schemas.py                # Pydantic models
â”‚   â””â”€â”€ test_xbrl_generation.py           # End-to-end test
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ dashboard/                    # Upload + status UI
â”‚   â”‚   â”œâ”€â”€ mapping-review/               # HITL interface
â”‚   â”‚   â””â”€â”€ results/                      # Download XBRL + Report
â”‚   â””â”€â”€ public/
â”‚       â””â”€â”€ sample-screens/               # UI mockups (to be added)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ FS-MFRS-OMESTI_HEALTHCARE_SDN._BHD-202201041807-31032024.xlsx
â”‚   â”œâ”€â”€ SSM_FS-MFRS_202201041807_20240331 - Copy.xml.txt
â”‚   â””â”€â”€ Filing report generated by mbrsAI.pdf
â”œâ”€â”€ uploads/
â”‚   â””â”€â”€ OHealthcare-AFS-2024.pdf
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md


## ðŸ”‘ 4. Critical Input Files for Qwen3-Coder
### Backend
- OHealthcare - AFS 2024.pdf â†’ PDF to process
- SSMxT_2022v1.0/ â†’ SSM taxonomy folder
- FS-MFRS-...xlsx â†’ Mapping ground truth
- SSM_FS-MFRS_...xml.txt â†’ XBRL reference
- Filing report generated by mbrsAI.pdf â†’ Report reference
### Frontend
- UI mockups (to be provided later) for:
- Upload dashboard - upload and also list of uploaded load with status. And edit/view/download
- Mapping review screen - ability to view/edit with xAI + HITL 
- Results page - Preview in the form of the Filing Report + XBRL instance. Allow to download these files.

## 5. Sample UIs for the Frontend.
![alt text](dashboard.png)


## ðŸ“Š 6. Quality Gates (LLM Evaluator)
![alt text](LLM_Eval.png)

